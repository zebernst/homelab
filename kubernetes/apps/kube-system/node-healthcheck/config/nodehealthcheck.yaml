---
apiVersion: remediation.medik8s.io/v1alpha1
kind: NodeHealthCheck
metadata:
  name: nhc-all-nodes
spec:
  # Select all nodes (4-node cluster: 3 CP + 1 GPU worker)
  selector: {}
  # At least 3 of 4 nodes must be healthy before remediating â€” prevents cascading failures
  minHealthy: "51%"
  unhealthyConditions:
    - type: Ready
      status: "False"
      duration: 300s
    - type: Ready
      status: Unknown
      duration: 300s
  remediationTemplate:
    apiVersion: self-node-remediation.medik8s.io/v1alpha1
    kind: SelfNodeRemediationTemplate
    name: self-node-remediation-automatic
    namespace: kube-system
